<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:local="clr-namespace:Test.CountDown">

    <local:ForegroundConverter x:Key="ForegroundConverter" />
    <Storyboard x:Key="FontSizeStoryboard">
        <DoubleAnimationUsingKeyFrames BeginTime="00:00:00"
                                       FillBehavior="Stop"
                                       Storyboard.TargetProperty="FontSize">
            <EasingDoubleKeyFrame KeyTime="00:00:0.6" Value="60">
                <EasingDoubleKeyFrame.EasingFunction>
                    <QuarticEase EasingMode="EaseInOut" />
                </EasingDoubleKeyFrame.EasingFunction>
            </EasingDoubleKeyFrame>
        </DoubleAnimationUsingKeyFrames>
    </Storyboard>

    <Style TargetType="{x:Type local:CountDownControl}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:CountDownControl}">
                    <Border Width="300" Height="124">
                        <Border.Background>
                            <ImageBrush ImageSource="{Binding BackgroundImage, RelativeSource={RelativeSource TemplatedParent}}" />
                        </Border.Background>
                        <Grid HorizontalAlignment="Center" VerticalAlignment="Center">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="46" />
                                <ColumnDefinition Width="46" />
                                <ColumnDefinition Width="20" />
                                <ColumnDefinition Width="46" />
                                <ColumnDefinition Width="46" />
                            </Grid.ColumnDefinitions>
                            <TextBlock Margin="0,10,16,0"
                                       HorizontalAlignment="Center"
                                       VerticalAlignment="Center"
                                       FontSize="48"
                                       FontWeight="Bold"
                                       Text="{Binding NumberList[0], RelativeSource={RelativeSource TemplatedParent}}" />
                            <TextBlock Grid.Column="1"
                                       Margin="0,10,8,0"
                                       HorizontalAlignment="Center"
                                       VerticalAlignment="Center"
                                       FontSize="48"
                                       FontWeight="Bold"
                                       Text="{Binding NumberList[1], RelativeSource={RelativeSource TemplatedParent}}" />
                            <TextBlock Grid.Column="2"
                                       HorizontalAlignment="Center"
                                       VerticalAlignment="Center"
                                       FontSize="48"
                                       FontWeight="Bold"
                                       Text=":" />
                            <TextBlock Grid.Column="3"
                                       Margin="6,10,0,0"
                                       HorizontalAlignment="Center"
                                       VerticalAlignment="Center"
                                       FontSize="48"
                                       FontWeight="Bold"
                                       Text="{Binding NumberList[2], RelativeSource={RelativeSource TemplatedParent}}" />
                            <TextBlock Grid.Column="4"
                                       Margin="15,10,0,0"
                                       HorizontalAlignment="Center"
                                       VerticalAlignment="Center"
                                       FontSize="48"
                                       FontWeight="Bold"
                                       Text="{Binding NumberList[3], RelativeSource={RelativeSource TemplatedParent}}">
                                <TextBlock.Foreground>
                                    <MultiBinding Converter="{StaticResource ForegroundConverter}">
                                        <Binding Path="NumberList[0]" RelativeSource="{RelativeSource TemplatedParent}" />
                                        <Binding Path="NumberList[1]" RelativeSource="{RelativeSource TemplatedParent}" />
                                        <Binding Path="NumberList[2]" RelativeSource="{RelativeSource TemplatedParent}" />
                                        <Binding Path="NumberList[3]" RelativeSource="{RelativeSource TemplatedParent}" />
                                    </MultiBinding>
                                </TextBlock.Foreground>
                                <TextBlock.Style>
                                    <Style>
                                        <Style.Triggers>
                                            <MultiDataTrigger>
                                                <MultiDataTrigger.Conditions>
                                                    <Condition Binding="{Binding NumberList[0], RelativeSource={RelativeSource TemplatedParent}}" Value="0" />
                                                    <Condition Binding="{Binding NumberList[1], RelativeSource={RelativeSource TemplatedParent}}" Value="0" />
                                                    <Condition Binding="{Binding NumberList[2], RelativeSource={RelativeSource TemplatedParent}}" Value="0" />
                                                    <Condition Binding="{Binding NumberList[3], RelativeSource={RelativeSource TemplatedParent}}" Value="5" />
                                                </MultiDataTrigger.Conditions>
                                                <MultiDataTrigger.EnterActions>
                                                    <BeginStoryboard x:Name="playAnimation5" Storyboard="{StaticResource FontSizeStoryboard}" />
                                                </MultiDataTrigger.EnterActions>
                                                <MultiDataTrigger.ExitActions>
                                                    <StopStoryboard BeginStoryboardName="playAnimation5" />
                                                </MultiDataTrigger.ExitActions>
                                            </MultiDataTrigger>

                                            <MultiDataTrigger>
                                                <MultiDataTrigger.Conditions>
                                                    <Condition Binding="{Binding NumberList[0], RelativeSource={RelativeSource TemplatedParent}}" Value="0" />
                                                    <Condition Binding="{Binding NumberList[1], RelativeSource={RelativeSource TemplatedParent}}" Value="0" />
                                                    <Condition Binding="{Binding NumberList[2], RelativeSource={RelativeSource TemplatedParent}}" Value="0" />
                                                    <Condition Binding="{Binding NumberList[3], RelativeSource={RelativeSource TemplatedParent}}" Value="4" />
                                                </MultiDataTrigger.Conditions>
                                                <MultiDataTrigger.EnterActions>
                                                    <BeginStoryboard x:Name="playAnimation4" Storyboard="{StaticResource FontSizeStoryboard}" />
                                                </MultiDataTrigger.EnterActions>
                                                <MultiDataTrigger.ExitActions>
                                                    <StopStoryboard BeginStoryboardName="playAnimation4" />
                                                </MultiDataTrigger.ExitActions>
                                            </MultiDataTrigger>

                                            <MultiDataTrigger>
                                                <MultiDataTrigger.Conditions>
                                                    <Condition Binding="{Binding NumberList[0], RelativeSource={RelativeSource TemplatedParent}}" Value="0" />
                                                    <Condition Binding="{Binding NumberList[1], RelativeSource={RelativeSource TemplatedParent}}" Value="0" />
                                                    <Condition Binding="{Binding NumberList[2], RelativeSource={RelativeSource TemplatedParent}}" Value="0" />
                                                    <Condition Binding="{Binding NumberList[3], RelativeSource={RelativeSource TemplatedParent}}" Value="3" />
                                                </MultiDataTrigger.Conditions>
                                                <MultiDataTrigger.EnterActions>
                                                    <BeginStoryboard x:Name="playAnimation3" Storyboard="{StaticResource FontSizeStoryboard}" />
                                                </MultiDataTrigger.EnterActions>
                                                <MultiDataTrigger.ExitActions>
                                                    <StopStoryboard BeginStoryboardName="playAnimation3" />
                                                </MultiDataTrigger.ExitActions>
                                            </MultiDataTrigger>

                                            <MultiDataTrigger>
                                                <MultiDataTrigger.Conditions>
                                                    <Condition Binding="{Binding NumberList[0], RelativeSource={RelativeSource TemplatedParent}}" Value="0" />
                                                    <Condition Binding="{Binding NumberList[1], RelativeSource={RelativeSource TemplatedParent}}" Value="0" />
                                                    <Condition Binding="{Binding NumberList[2], RelativeSource={RelativeSource TemplatedParent}}" Value="0" />
                                                    <Condition Binding="{Binding NumberList[3], RelativeSource={RelativeSource TemplatedParent}}" Value="2" />
                                                </MultiDataTrigger.Conditions>
                                                <MultiDataTrigger.EnterActions>
                                                    <BeginStoryboard x:Name="playAnimation2" Storyboard="{StaticResource FontSizeStoryboard}" />
                                                </MultiDataTrigger.EnterActions>
                                                <MultiDataTrigger.ExitActions>
                                                    <StopStoryboard BeginStoryboardName="playAnimation2" />
                                                </MultiDataTrigger.ExitActions>
                                            </MultiDataTrigger>

                                            <MultiDataTrigger>
                                                <MultiDataTrigger.Conditions>
                                                    <Condition Binding="{Binding NumberList[0], RelativeSource={RelativeSource TemplatedParent}}" Value="0" />
                                                    <Condition Binding="{Binding NumberList[1], RelativeSource={RelativeSource TemplatedParent}}" Value="0" />
                                                    <Condition Binding="{Binding NumberList[2], RelativeSource={RelativeSource TemplatedParent}}" Value="0" />
                                                    <Condition Binding="{Binding NumberList[3], RelativeSource={RelativeSource TemplatedParent}}" Value="1" />
                                                </MultiDataTrigger.Conditions>
                                                <MultiDataTrigger.EnterActions>
                                                    <BeginStoryboard x:Name="playAnimation1" Storyboard="{StaticResource FontSizeStoryboard}" />
                                                </MultiDataTrigger.EnterActions>
                                                <MultiDataTrigger.ExitActions>
                                                    <StopStoryboard BeginStoryboardName="playAnimation1" />
                                                </MultiDataTrigger.ExitActions>
                                            </MultiDataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </TextBlock.Style>
                            </TextBlock>
                        </Grid>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ResourceDictionary>
