<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:sys="clr-namespace:System;assembly=System.Runtime"
                    xmlns:controls="clr-namespace:Learning.PrismDemo.Controls;assembly=Learning.PrismDemo.Controls">

    <Style x:Key="CloseLoadingButtonStyle"
           TargetType="{x:Type Button}">
        <Setter Property="Width"
                Value="16" />
        <Setter Property="Height"
                Value="16" />
        <Setter Property="Margin"
                Value="0,2,5,0" />
        <Setter Property="ToolTip"
                Value="取消" />
        <Setter Property="HorizontalAlignment"
                Value="Right" />
        <Setter Property="VerticalAlignment"
                Value="Top" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type Button}">
                    <Image Source="{DynamicResource Close_Loading_Normal}"
                           Stretch="Uniform"
                           x:Name="img"
                           Width="{TemplateBinding Width}"
                           Height="{TemplateBinding Height}" />

                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver"
                                 Value="True">
                            <Setter Property="Source"
                                    TargetName="img"
                                    Value="{DynamicResource Close_Loading_Hover}" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="{x:Type controls:BusyIndicator}"
           x:Key="BusyIndicator_Container_Style">
        <Setter Property="FontSize"
                Value="14" />
        <Setter Property="Foreground"
                Value="#FFFFFFFF" />
        <Setter Property="Background"
                Value="#CC000000" />
        <Setter Property="OverlayStyle">
            <Setter.Value>
                <Style TargetType="Rectangle">
                    <Setter Property="Fill"
                            Value="#FFFFFFFF" />
                    <Setter Property="Opacity"
                            Value="0.1" />
                </Style>
            </Setter.Value>
        </Setter>

        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type controls:BusyIndicator}">
                    <Grid>
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="VisibilityStates">
                                <VisualStateGroup.Transitions>
                                    <VisualTransition />
                                </VisualStateGroup.Transitions>
                                <VisualState x:Name="Hidden">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames BeginTime="00:00:00"
                                                                       Duration="00:00:00.001"
                                                                       Storyboard.TargetProperty="(UIElement.Visibility)"
                                                                       Storyboard.TargetName="busycontent">
                                            <DiscreteObjectKeyFrame KeyTime="00:00:00">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <Visibility>Collapsed</Visibility>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames BeginTime="00:00:00"
                                                                       Duration="00:00:00.001"
                                                                       Storyboard.TargetProperty="(UIElement.Visibility)"
                                                                       Storyboard.TargetName="overlay">
                                            <DiscreteObjectKeyFrame KeyTime="00:00:00">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <Visibility>Collapsed</Visibility>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Visible">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames BeginTime="00:00:00"
                                                                       Duration="00:00:00.001"
                                                                       Storyboard.TargetProperty="(UIElement.Visibility)"
                                                                       Storyboard.TargetName="busycontent">
                                            <DiscreteObjectKeyFrame KeyTime="00:00:00">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <Visibility>Visible</Visibility>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames BeginTime="00:00:00"
                                                                       Duration="00:00:00.001"
                                                                       Storyboard.TargetProperty="(UIElement.Visibility)"
                                                                       Storyboard.TargetName="overlay">
                                            <DiscreteObjectKeyFrame KeyTime="00:00:00">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <Visibility>Visible</Visibility>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="BusyStates">
                                <VisualState x:Name="Idle">
                                    <!--<Storyboard FillBehavior="Stop">
                                        <DoubleAnimation Duration="0:0:2"
                                                         To="0"
                                                         Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(RotateTransform.Angle)"
                                                         Storyboard.TargetName="dots" />
                                    </Storyboard>-->
                                </VisualState>
                                <VisualState x:Name="Busy">
                                    <Storyboard RepeatBehavior="Forever">
                                        <DoubleAnimation Duration="0:0:2"
                                                         To="360"
                                                         Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(RotateTransform.Angle)"
                                                         Storyboard.TargetName="dots" />
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>

                        <Rectangle x:Name="overlay"
                                   Style="{TemplateBinding OverlayStyle}" />

                        <Grid x:Name="busycontent"
                              MaxWidth="410"
                              Height="80"
                              HorizontalAlignment="Center"
                              VerticalAlignment="Center">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <Border Grid.ColumnSpan="2"
                                    CornerRadius="8"
                                    Background="{TemplateBinding Background}"
                                    BorderBrush="{TemplateBinding BorderBrush}"
                                    BorderThickness="{TemplateBinding BorderThickness}">
                                <Border.Effect>
                                    <BlurEffect Radius="6"
                                                KernelType="Gaussian" />
                                </Border.Effect>
                            </Border>

                            <Grid x:Name="dots"
                                  Margin="15,0,0,0"
                                  Width="64"
                                  Height="64"
                                  RenderTransformOrigin="0.5,0.5">
                                <Grid.RenderTransform>
                                    <TransformGroup>
                                        <RotateTransform Angle="0" />
                                        <SkewTransform />
                                        <TranslateTransform />
                                        <ScaleTransform ScaleX="1"
                                                        ScaleY="1" />
                                    </TransformGroup>
                                </Grid.RenderTransform>

                                <Path Data="M32,0 L32,32"
                                      StrokeStartLineCap="Round"
                                      StrokeThickness="6"
                                      VerticalAlignment="Top"
                                      RenderTransformOrigin="0.5,1">
                                    <Path.Stroke>
                                        <LinearGradientBrush StartPoint="0.5,0"
                                                             EndPoint="0.5,1">
                                            <GradientStop Color="Transparent"
                                                          Offset="1" />
                                            <GradientStop Color="Transparent"
                                                          Offset="0.51" />
                                            <GradientStop Color="#FF4CB2FC"
                                                          Offset="0.5" />
                                            <GradientStop Color="#FF4CB2FC"
                                                          Offset="0" />
                                        </LinearGradientBrush>
                                    </Path.Stroke>

                                    <Path.RenderTransform>
                                        <RotateTransform Angle="0" />
                                    </Path.RenderTransform>
                                </Path>

                                <Path Data="M32,0 L32,32"
                                      StrokeStartLineCap="Round"
                                      StrokeThickness="6"
                                      VerticalAlignment="Top"
                                      RenderTransformOrigin="0.5,1">
                                    <Path.Stroke>
                                        <LinearGradientBrush StartPoint="0.5,0"
                                                             EndPoint="0.5,1">
                                            <GradientStop Color="Transparent"
                                                          Offset="1" />
                                            <GradientStop Color="Transparent"
                                                          Offset="0.51" />
                                            <GradientStop Color="#FF349AFC"
                                                          Offset="0.5" />
                                            <GradientStop Color="#FF349AFC"
                                                          Offset="0" />
                                        </LinearGradientBrush>
                                    </Path.Stroke>

                                    <Path.RenderTransform>
                                        <RotateTransform Angle="30" />
                                    </Path.RenderTransform>
                                </Path>

                                <Path Data="M32,0 L32,32"
                                      StrokeStartLineCap="Round"
                                      StrokeThickness="6"
                                      VerticalAlignment="Top"
                                      RenderTransformOrigin="0.5,1">
                                    <Path.Stroke>
                                        <LinearGradientBrush StartPoint="0.5,0"
                                                             EndPoint="0.5,1">
                                            <GradientStop Color="Transparent"
                                                          Offset="1" />
                                            <GradientStop Color="Transparent"
                                                          Offset="0.51" />
                                            <GradientStop Color="#FF1C7EFC"
                                                          Offset="0.5" />
                                            <GradientStop Color="#FF1C7EFC"
                                                          Offset="0" />
                                        </LinearGradientBrush>
                                    </Path.Stroke>

                                    <Path.RenderTransform>
                                        <RotateTransform Angle="60" />
                                    </Path.RenderTransform>
                                </Path>

                                <Path Data="M32,0 L32,32"
                                      StrokeStartLineCap="Round"
                                      StrokeThickness="6"
                                      VerticalAlignment="Top"
                                      RenderTransformOrigin="0.5,1">
                                    <Path.Stroke>
                                        <LinearGradientBrush StartPoint="0.5,0"
                                                             EndPoint="0.5,1">
                                            <GradientStop Color="Transparent"
                                                          Offset="1" />
                                            <GradientStop Color="Transparent"
                                                          Offset="0.51" />
                                            <GradientStop Color="#FF0466FC"
                                                          Offset="0.5" />
                                            <GradientStop Color="#FF0466FC"
                                                          Offset="0" />
                                        </LinearGradientBrush>
                                    </Path.Stroke>

                                    <Path.RenderTransform>
                                        <RotateTransform Angle="90" />
                                    </Path.RenderTransform>
                                </Path>

                                <Path Data="M32,0 L32,32"
                                      StrokeStartLineCap="Round"
                                      StrokeThickness="6"
                                      VerticalAlignment="Top"
                                      RenderTransformOrigin="0.5,1">
                                    <Path.Stroke>
                                        <LinearGradientBrush StartPoint="0.5,0"
                                                             EndPoint="0.5,1">
                                            <GradientStop Color="Transparent"
                                                          Offset="1" />
                                            <GradientStop Color="Transparent"
                                                          Offset="0.51" />
                                            <GradientStop Color="#FFB4FEFC"
                                                          Offset="0.5" />
                                            <GradientStop Color="#FFB4FEFC"
                                                          Offset="0" />
                                        </LinearGradientBrush>
                                    </Path.Stroke>

                                    <Path.RenderTransform>
                                        <RotateTransform Angle="120" />
                                    </Path.RenderTransform>
                                </Path>

                                <Path Data="M32,0 L32,32"
                                      StrokeStartLineCap="Round"
                                      StrokeThickness="6"
                                      VerticalAlignment="Top"
                                      RenderTransformOrigin="0.5,1">
                                    <Path.Stroke>
                                        <LinearGradientBrush StartPoint="0.5,0"
                                                             EndPoint="0.5,1">
                                            <GradientStop Color="Transparent"
                                                          Offset="1" />
                                            <GradientStop Color="Transparent"
                                                          Offset="0.51" />
                                            <GradientStop Color="#FFB4FEFC"
                                                          Offset="0.5" />
                                            <GradientStop Color="#FFB4FEFC"
                                                          Offset="0" />
                                        </LinearGradientBrush>
                                    </Path.Stroke>

                                    <Path.RenderTransform>
                                        <RotateTransform Angle="150" />
                                    </Path.RenderTransform>
                                </Path>

                                <Path Data="M32,0 L32,32"
                                      StrokeStartLineCap="Round"
                                      StrokeThickness="6"
                                      VerticalAlignment="Top"
                                      RenderTransformOrigin="0.5,1">
                                    <Path.Stroke>
                                        <LinearGradientBrush StartPoint="0.5,0"
                                                             EndPoint="0.5,1">
                                            <GradientStop Color="Transparent"
                                                          Offset="1" />
                                            <GradientStop Color="Transparent"
                                                          Offset="0.51" />
                                            <GradientStop Color="#FFB4FEFC"
                                                          Offset="0.5" />
                                            <GradientStop Color="#FFB4FEFC"
                                                          Offset="0" />
                                        </LinearGradientBrush>
                                    </Path.Stroke>

                                    <Path.RenderTransform>
                                        <RotateTransform Angle="180" />
                                    </Path.RenderTransform>
                                </Path>

                                <Path Data="M32,0 L32,32"
                                      StrokeStartLineCap="Round"
                                      StrokeThickness="6"
                                      VerticalAlignment="Top"
                                      RenderTransformOrigin="0.5,1">
                                    <Path.Stroke>
                                        <LinearGradientBrush StartPoint="0.5,0"
                                                             EndPoint="0.5,1">
                                            <GradientStop Color="Transparent"
                                                          Offset="1" />
                                            <GradientStop Color="Transparent"
                                                          Offset="0.51" />
                                            <GradientStop Color="#FFB4FEFC"
                                                          Offset="0.5" />
                                            <GradientStop Color="#FFB4FEFC"
                                                          Offset="0" />
                                        </LinearGradientBrush>
                                    </Path.Stroke>

                                    <Path.RenderTransform>
                                        <RotateTransform Angle="210" />
                                    </Path.RenderTransform>
                                </Path>

                                <Path Data="M32,0 L32,32"
                                      StrokeStartLineCap="Round"
                                      StrokeThickness="6"
                                      VerticalAlignment="Top"
                                      RenderTransformOrigin="0.5,1">
                                    <Path.Stroke>
                                        <LinearGradientBrush StartPoint="0.5,0"
                                                             EndPoint="0.5,1">
                                            <GradientStop Color="Transparent"
                                                          Offset="1" />
                                            <GradientStop Color="Transparent"
                                                          Offset="0.51" />
                                            <GradientStop Color="#FFB4FEFC"
                                                          Offset="0.5" />
                                            <GradientStop Color="#FFB4FEFC"
                                                          Offset="0" />
                                        </LinearGradientBrush>
                                    </Path.Stroke>

                                    <Path.RenderTransform>
                                        <RotateTransform Angle="240" />
                                    </Path.RenderTransform>
                                </Path>

                                <Path Data="M32,0 L32,32"
                                      StrokeStartLineCap="Round"
                                      StrokeThickness="6"
                                      VerticalAlignment="Top"
                                      RenderTransformOrigin="0.5,1">
                                    <Path.Stroke>
                                        <LinearGradientBrush StartPoint="0.5,0"
                                                             EndPoint="0.5,1">
                                            <GradientStop Color="Transparent"
                                                          Offset="1" />
                                            <GradientStop Color="Transparent"
                                                          Offset="0.51" />
                                            <GradientStop Color="#FF9CFEFC"
                                                          Offset="0.5" />
                                            <GradientStop Color="#FF9CFEFC"
                                                          Offset="0" />
                                        </LinearGradientBrush>
                                    </Path.Stroke>

                                    <Path.RenderTransform>
                                        <RotateTransform Angle="270" />
                                    </Path.RenderTransform>
                                </Path>

                                <Path Data="M32,0 L32,32"
                                      StrokeStartLineCap="Round"
                                      StrokeThickness="6"
                                      VerticalAlignment="Top"
                                      RenderTransformOrigin="0.5,1">
                                    <Path.Stroke>
                                        <LinearGradientBrush StartPoint="0.5,0"
                                                             EndPoint="0.5,1">
                                            <GradientStop Color="Transparent"
                                                          Offset="1" />
                                            <GradientStop Color="Transparent"
                                                          Offset="0.51" />
                                            <GradientStop Color="#FF7CE6FC"
                                                          Offset="0.5" />
                                            <GradientStop Color="#FF7CE6FC"
                                                          Offset="0" />
                                        </LinearGradientBrush>
                                    </Path.Stroke>

                                    <Path.RenderTransform>
                                        <RotateTransform Angle="300" />
                                    </Path.RenderTransform>
                                </Path>

                                <Path Data="M32,0 L32,32"
                                      StrokeStartLineCap="Round"
                                      StrokeThickness="6"
                                      VerticalAlignment="Top"
                                      RenderTransformOrigin="0.5,1">
                                    <Path.Stroke>
                                        <LinearGradientBrush StartPoint="0.5,0"
                                                             EndPoint="0.5,1">
                                            <GradientStop Color="Transparent"
                                                          Offset="1" />
                                            <GradientStop Color="Transparent"
                                                          Offset="0.51" />
                                            <GradientStop Color="#FF64C6FC"
                                                          Offset="0.5" />
                                            <GradientStop Color="#FF64C6FC"
                                                          Offset="0" />
                                        </LinearGradientBrush>
                                    </Path.Stroke>

                                    <Path.RenderTransform>
                                        <RotateTransform Angle="330" />
                                    </Path.RenderTransform>
                                </Path>
                            </Grid>

                            <ContentPresenter Grid.Column="1"
                                              Margin="15"
                                              VerticalAlignment="Center"
                                              Content="{TemplateBinding BusyContent}"
                                              ContentTemplate="{TemplateBinding BusyContentTemplate}" />

                            <Button Grid.ColumnSpan="2"
                                    Command="{TemplateBinding CloseCommand}"
                                    Style="{StaticResource CloseLoadingButtonStyle}" />
                        </Grid>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

</ResourceDictionary>